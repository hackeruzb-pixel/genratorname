<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Random ‚Äî 22 Odam (Clean Light + Animation)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#ffffff;
    --card:#ffffff;
    --muted:#6b7280;
    --accent1:#7c3aed;
    --accent2:#06b6d4;
    --glass-border: rgba(15,23,42,0.06);
    --shadow: 0 12px 30px rgba(2,6,23,0.08);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;}
  body{
    background: var(--bg);
    color:#0f172a;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
  }

  /* layout */
  .wrap{
    width:100%;
    max-width:900px;
    display:grid;
    grid-template-columns: 1fr 340px;
    gap:22px;
    align-items:start;
  }

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(250,250,250,0.9));
    border-radius:16px;
    padding:22px;
    box-shadow: var(--shadow);
    border:1px solid var(--glass-border);
    position:relative;
  }

  /* Left - main */
  h1{ margin:0 0 6px; font-size:20px; color:var(--accent1); }
  p.lead{ margin:0 0 14px; color:var(--muted); font-size:14px; }

  .display-wrap{
    height:136px;
    border-radius:14px;
    background: linear-gradient(180deg,#ffffff,#fbfbff);
    border:1px solid rgba(15,23,42,0.04);
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    overflow:hidden;
  }

  /* Single visible name */
  #nameBox{
    font-size:36px;
    font-weight:800;
    color:var(--accent1);
    text-align:center;
    transition: transform .45s cubic-bezier(.2,.9,.25,1), text-shadow .35s, color .35s, opacity .2s;
    transform-origin:center;
    padding:10px 16px;
    border-radius:10px;
    background: linear-gradient(90deg, rgba(124,58,237,0.06), rgba(6,182,212,0.03));
  }

  /* transient small label */
  #subLabel{ margin-top:10px; color:var(--muted); font-size:13px; text-align:center; }

  /* controls */
  .controls{ display:flex; gap:12px; margin-top:18px; align-items:center; }
  .btn{
    padding:12px 16px;
    border-radius:12px;
    border:none;
    cursor:pointer;
    font-weight:700;
    letter-spacing:.2px;
    transition: transform .12s ease, box-shadow .12s ease, opacity .12s;
    display:inline-flex;
    align-items:center;
    gap:10px;
  }
  .btn:active{ transform: translateY(2px); }

  .btn-random{
    background: linear-gradient(90deg,var(--accent1),var(--accent2));
    color:white;
    box-shadow: 0 10px 26px rgba(124,58,237,0.12);
    min-width:160px;
  }
  .btn-reset{
    background:transparent;
    border:1px solid rgba(15,23,42,0.06);
    color:var(--muted);
    min-width:120px;
  }

  /* right column */
  .right h3{ margin:0 0 8px; font-size:16px; color:#0f172a; }
  .info{ color:var(--muted); font-size:14px; margin-bottom:12px; }
  .history{ max-height:420px; overflow:auto; padding-right:8px; margin-top:8px; }
  .history-item{ padding:10px 12px; border-radius:10px; margin-bottom:8px; background:#fff; border:1px solid rgba(0,0,0,0.04); font-weight:600; display:flex; justify-content:space-between; align-items:center; color:#0f172a; box-shadow: 0 6px 18px rgba(2,6,23,0.03); }

  .counter{ margin-top:12px; color:var(--muted); font-weight:700; text-align:left; }

  /* confetti */
  .confetti{ position:fixed; inset:0; pointer-events:none; z-index:60; overflow:hidden; }
  .confetti .piece{ position:absolute; font-size:20px; animation: fall linear forwards; transform-origin:center; }
  @keyframes fall{ 0%{ transform: translateY(-120%) rotate(0deg); } 100%{ transform: translateY(110vh) rotate(720deg); } }

  /* strong selection animation classes */
  .spin-fast{ animation: spinFast 650ms linear; }
  .fade-in { animation: fadeInName 420ms ease-out forwards; }
  @keyframes spinFast {
    0%{ transform: translateY(0) rotate(0deg) scale(1); opacity:1; }
    40%{ transform: translateY(-6px) rotate(-4deg) scale(0.95); opacity:0.9; }
    70%{ transform: translateY(6px) rotate(4deg) scale(1.02); opacity:0.98; }
    100%{ transform: translateY(0) rotate(0deg) scale(1); opacity:1; }
  }
  @keyframes fadeInName{
    from{ transform: scale(.88); opacity:0; filter: blur(3px); }
    to{ transform: scale(1); opacity:1; filter: blur(0); }
  }

  /* responsive */
  @media (max-width:880px){
    .wrap{ grid-template-columns: 1fr 320px; gap:14px; padding:8px; }
    #nameBox{ font-size:32px; }
    .display-wrap{ height:120px; }
  }
  @media (max-width:720px){
    .wrap{ grid-template-columns: 1fr; }
    .right{ order:2; }
    .left{ order:1; }
    .display-wrap{ height:100px; }
    #nameBox{ font-size:24px; padding:8px 10px; }
    .controls{ flex-direction:row; gap:10px; }
    .btn{ flex:1; min-width:0; justify-content:center;}
  }
  @media (max-width:420px){
    body{ padding:12px; }
    #nameBox{ font-size:20px; }
    .display-wrap{ height:88px; }
  }

  /* focus outlines */
  button:focus{ outline: 3px solid rgba(124,58,237,0.12); outline-offset:4px; border-radius:10px; }

</style>
</head>
<body>
  <div class="confetti" id="confetti"></div>

  <div class="wrap">
    <!-- LEFT -->
    <div class="left card" id="mainCard">
      <h1>üîÆ Random tanlov ‚Äî 22 odam</h1>

      <div class="display-wrap" aria-live="polite" aria-atomic="true">
        <div id="nameBox">‚Äî</div>
      </div>

      <div id="subLabel" class="small">Boshlash uchun "Random" tugmasini bosing</div>

      <div class="controls">
        <button id="randomBtn" class="btn btn-random">üîÆ Random</button>
        <button id="resetBtn" class="btn btn-reset">üîÅ Qayta boshlash</button>
      </div>

      <div class="counter" id="counter">0 / 22 tanlandi</div>
    </div>

    <!-- RIGHT -->
    <div class="right card">
      <h3>Tarix va ro ªyxat</h3>
      <div class="info">Chiqqan ismlar tarixini ko‚Äòrasiz. Faqat Random va Reset tugmalari mavjud.</div>

      <div class="history" id="history" aria-live="polite"></div>
    </div>
  </div>

<script>
/* ========== DATA ========== */
let names = [
  "Maxsetova Sevara",
  "Ongarbaeva Gulbahor",
  "Orazbaeva Gulsevar",
  "Umirzakova Asemay",
  "Ko‚Äòchkarbaeva Durdona",
  "Chekmaryov Dmitriy",
  "Madiyarova Asal",
  "Kuandikov Xursand",
  "D.Jumaliyev Chingiz",
  "Koptleuova Shaxnoza",
  "Duzelov Jamshid",
  "Alyanova Jasmina",
  "Rzamuratova Dinora",
  "Buribaeva Gulxayo",
  "Shamuratova Aygul",
  "Genzhebaeva Zarina",
  "Ibragimova Moxinur",
  "Jumagaliyev Islombek",
  "Murtazaeva Sevinch",
  "Saburbayev Ag'abek",
  "Kuralbaev Ajiniyaz",
  "Usenov Sultanbek",
]; 

/* ========== STATE & ELEMENTS ========== */
const total = 22;
let shuffled = [];
let index = 0;

const nameBox = document.getElementById('nameBox');
const counter = document.getElementById('counter');
const historyEl = document.getElementById('history');
const randomBtn = document.getElementById('randomBtn');
const resetBtn = document.getElementById('resetBtn');
const confettiWrap = document.getElementById('confetti');
const subLabel = document.getElementById('subLabel');

/* UTILITIES */
function shuffle(arr){ return arr.map(a=>({r:Math.random(),v:a})).sort((a,b)=>a.r-b.r).map(x=>x.v); }
function wait(ms){ return new Promise(res=>setTimeout(res,ms)); }

/* Initialize block */
function newBlock(){
  shuffled = shuffle(names).slice(0, total);
  index = 0;
  updateCounter();
  console.log('Yangi block:', shuffled);
}
newBlock();

/* Animations: main flow
   - rapidCycle: overlay flicker of names quickly (simulates spinning)
   - then slow reveal (fade/scale)
*/
let rapidInterval = null;
function rapidCycle(duration = 900, speed = 60){
  return new Promise((resolve)=>{
    const start = Date.now();
    rapidInterval = setInterval(()=>{
      nameBox.textContent = shuffled[Math.floor(Math.random()*shuffled.length)];
      // small random transform for dynamism
      nameBox.style.transform = `scale(${1 + (Math.random()*0.08)}) rotate(${(Math.random()*6-3)}deg)`;
    }, speed);
    setTimeout(()=>{
      clearInterval(rapidInterval);
      rapidInterval = null;
      nameBox.style.transform = '';
      resolve();
    }, duration);
  });
}

/* show final with highlight */
async function revealFinal(finalName){
  // subtle pre-style
  nameBox.classList.remove('selected');
  nameBox.style.opacity = '0.98';
  // brief pulse
  nameBox.classList.add('spin-fast');
  await wait(380);
  nameBox.classList.remove('spin-fast');

  // show final with fade-in scale
  nameBox.textContent = finalName;
  nameBox.classList.add('selected');
  nameBox.style.transform = 'scale(1.18)';
  await wait(520);
  nameBox.style.transform = 'scale(1)';
}

/* add to history */
function addHistory(name){
  const el = document.createElement('div');
  el.className = 'history-item';
  const left = document.createElement('div');
  left.textContent = name;
  const right = document.createElement('div');
  right.style.fontSize = '13px';
  right.style.color = '#6b7280';
  right.textContent = new Date().toLocaleTimeString();
  el.appendChild(left);
  el.appendChild(right);
  historyEl.prepend(el);
}

/* confetti (emoji falling) */
function runConfetti(){
  const emojis = ['üéâ','‚ú®','ü•≥','üéä','üí´','üåü'];
  const count = 22;
  confettiWrap.innerHTML = '';
  for(let i=0;i<count;i++){
    const p = document.createElement('div');
    p.className = 'piece';
    p.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    p.style.left = (Math.random()*100) + '%';
    p.style.fontSize = (12 + Math.random()*24) + 'px';
    p.style.top = (-10 - Math.random()*20) + '%';
    p.style.opacity = 0.95;
    p.style.transform = `rotate(${Math.random()*360}deg)`;
    p.style.animationDuration = (900 + Math.random()*1600) + 'ms';
    confettiWrap.appendChild(p);
    setTimeout(()=> p.remove(), 2600);
  }
}

/* Main: getRandom */
let animating = false;
async function getRandom(){
  if(animating) return;
  if(names.length < total){ alert(`Kamida ${total} ta ism kerak.`); return; }

  if(index === 0 || index >= total) newBlock();

  animating = true;
  randomBtn.disabled = true;
  randomBtn.style.opacity = 0.7;
  subLabel.textContent = 'Tanlanmoqda...';

  const finalName = shuffled[index];
  index++;
  updateCounter();

  // Rapid cycling (faster, feels like spin)
  await rapidCycle(900, 55);

  // short pause
  await wait(80);

  // reveal final with highlight
  await revealFinal(finalName);

  // add history
  addHistory(finalName);

  // confetti if block finished
  if(index >= total){
    runConfetti();
    subLabel.textContent = '22 ta tugadi ‚Äî avtomatik qayta boshlash uchun Qayta bosishingiz mumkin';
  } else {
    subLabel.textContent = 'Tayyor ‚Äî yana bosing';
  }

  animating = false;
  randomBtn.disabled = false;
  randomBtn.style.opacity = 1;
}

/* update counter */
function updateCounter(){ counter.textContent = `${index} / ${total} tanlandi`; }

/* reset logic */
function resetAll(){
  if(!confirm('Haqiqatan ham qaytadan boshlashni xohlaysizmi? (Tarix va blok o‚Äòchadi)')) return;
  newBlock();
  historyEl.innerHTML = '';
  nameBox.textContent = '‚Äî';
  nameBox.classList.remove('selected');
  subLabel.textContent = 'Boshlash uchun "Random" tugmasini bosing';
}

/* button handlers */
randomBtn.addEventListener('click', ()=> getRandom());
resetBtn.addEventListener('click', resetAll);

/* initialize UI */
nameBox.textContent = '‚Äî';
updateCounter();

</script>
</body>
</html>
